webpackJsonp([1],{"7VM3":function(t,e){},"9ctF":function(t,e){},CukG:function(t,e){},Msyf:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App"},n,!1,function(t){i("ar3o")},null,null).exports,l=i("/ocq"),a=i("mtWM"),r=i.n(a),c=function(t){return r.a.post("/api/design",t).then(function(t){return t.data})},d=function(t){return r.a.post("/api/answer",t).then(function(t){return t.data})},u=i("zL8q"),p=i.n(u),m={name:"Login",data:function(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"},{max:20,message:"账号长度最长20位",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,message:"密码长度最少为6位",trigger:"blur"}]}}},mounted:function(){this.logincheck()},methods:{logincheck:function(){var t=this;c({opera_type:"logincheck"}).then(function(e){console.log(e),404==e.code&&t.$router.push({path:"/login"}),null!=e.data&&(console.log(e),sessionStorage.setItem("username",e.data.user),t.$router.push({path:"/home"}))})},login:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;c({opera_type:"login",username:e.loginForm.username,password:e.$md5(e.loginForm.password)}).then(function(t){console.log(t),0==t.code?(e.$notify({type:"success",message:"欢迎你,"+e.loginForm.username+"!",duration:3e3}),e.$router.push({path:"/home"}),sessionStorage.setItem("username",e.loginForm.username),e.$emit("state")):-5==t.code?e.$message({type:"error",message:"您还未注册账户，请注册",showClose:!0}):e.$message({type:"error",message:"账号或密码错误",showClose:!0})})})}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{staticClass:"main_login"},[i("div",{staticClass:"title"},[t._v("登 录")]),t._v(" "),i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-form",{ref:"loginForm",attrs:{rules:t.rules,model:t.loginForm}},[i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{icon:"el-icon-search",placeholder:"请输入用户名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login("loginForm")}},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}},[i("i",{staticClass:"el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login("loginForm")}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}},[i("i",{staticClass:"el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),i("el-form-item",[i("el-button",{staticStyle:{"text-align":"center",width:"150px"},attrs:{type:"primary"},on:{click:function(e){return t.login("loginForm")}}},[t._v("登  录")])],1)],1)],1),t._v(" "),i("div",{staticClass:"link"},[i("el-link",{attrs:{type:"primary",underline:!1,href:"/register"}},[t._v("注册新账号")])],1)],1)])},staticRenderFns:[]};var h=i("VU/8")(m,g,!1,function(t){i("eSc+")},"data-v-bbefbe84",null).exports,v={name:"Register",data:function(){var t=this;return{registerForm:{username:"",pass:"",checkPass:""},rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"},{max:20,message:"账号长度最长20位",trigger:"blur"}],pass:[{required:!0,validator:function(e,i,s){""===i?s(new Error("请输入密码")):(""!==t.registerForm.checkPass&&t.$refs.registerForm.validateField("checkPass"),s())},trigger:"blur"},{min:6,message:"密码长度最少为6位",trigger:"blur"},{max:16,message:"密码长度不能超过16位",trigger:"blur"}],checkPass:[{required:!0,validator:function(e,i,s){""===i?s(new Error("请再次输入密码")):i!==t.registerForm.pass?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]}}},mounted:function(){this.logincheck()},methods:{logincheck:function(){var t=this;c({opera_type:"logincheck"}).then(function(e){if(console.log(e),404==e.code)return!1;null!=e.data&&(console.log(e),sessionStorage.setItem("username",e.data.user),t.$router.push({path:"/home"}))})},Register:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;c({opera_type:"register",username:e.registerForm.username,password:e.$md5(e.registerForm.pass)}).then(function(t){console.log(t),0==t.code?(e.$message({message:"注册成功，请登录!",type:"success"}),e.$router.push({path:"/login"})):e.$message({type:"error",message:"该用户名已被注册",showClose:!0})})})},resetForm:function(t){this.$refs[t].resetFields()}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"register"},[i("div",{staticClass:"main-register"},[i("div",{staticClass:"title"},[t._v("注 册")]),t._v(" "),i("el-row",[i("el-form",{ref:"registerForm",staticClass:"demo-registeForm",attrs:{model:t.registerForm,"status-icon":"",rules:t.rules,size:"medium","label-width":"100px"}},[i("el-form-item",{attrs:{prop:"username",label:"用户名"}},[i("el-input",{attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Register("registerForm")}},model:{value:t.registerForm.username,callback:function(e){t.$set(t.registerForm,"username",e)},expression:"registerForm.username"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"密码",prop:"pass"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入密码(不少于6位)","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Register("registerForm")}},model:{value:t.registerForm.pass,callback:function(e){t.$set(t.registerForm,"pass",e)},expression:"registerForm.pass"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请再次输入密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Register("registerForm")}},model:{value:t.registerForm.checkPass,callback:function(e){t.$set(t.registerForm,"checkPass",e)},expression:"registerForm.checkPass"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"-25%"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.Register("registerForm")}}},[t._v("注册")]),t._v(" "),i("el-button",{staticStyle:{"margin-right":"-5%"},on:{click:function(e){return t.resetForm("registerForm")}}},[t._v("重置")])],1)],1)],1),t._v(" "),i("div",{staticClass:"link"},[i("el-link",{attrs:{type:"primary",underline:!1,href:"/login"}},[t._v("已有账号?去登录")])],1)],1)])},staticRenderFns:[]};var w=i("VU/8")(v,f,!1,function(t){i("Msyf")},"data-v-188b0150",null).exports,_={name:"Base",data:function(){return{showname:!1,username:""}},methods:{toIndex:function(){this.$router.push({path:"/index"})},logincheck:function(){var t=this;c({opera_type:"logincheck"}).then(function(e){if(console.log(e),404==e.code)return!1;null!=e.data&&(console.log(e),sessionStorage.setItem("username",e.data.user)),t.state()})},toHome:function(){this.$router.push({path:"/home"})},toLogin:function(){this.$router.push({path:"/login"})},toRegiste:function(){this.$router.push({path:"/register"})},state:function(){console.log("state"),console.log(sessionStorage.getItem("username")),null!=sessionStorage.getItem("username")?(this.showname=!0,this.username=sessionStorage.getItem("username")):this.showname=!1},handleCommand:function(t){"a"==t?this.toHome():"b"==t&&this.exit()},exit:function(t){var e=this;c({opera_type:"exit",username:sessionStorage.getItem("username")}).then(function(t){console.log(t),0==t.code?(sessionStorage.clear(),e.state(),e.toLogin()):e.$message({type:"error",message:"网络错误！",showClose:!0})})}},mounted:function(){this.logincheck()}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("el-container",[i("el-header",[i("div",{staticClass:"logo",on:{click:t.toIndex}},[i("img",{staticClass:"logoImg",attrs:{src:"/static/images/logo.png"}}),t._v(" "),i("span",{staticStyle:{color:"#303133"}},[t._v("问卷喵")]),t._v(" "),i("span",{staticStyle:{"font-size":"13px","margin-left":"5px",color:"#606266"}},[t._v("——免费的在线问卷调查系统")])]),t._v(" "),i("div",{staticStyle:{float:"right","margin-right":"50px","line-height":"60px"}},[t.showname?[i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[t._v("\n              "+t._s(t.username)),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"a"}},[t._v("问卷管理")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"b"}},[t._v("退出登录")])],1)],1)]:[i("el-button",{staticStyle:{"font-size":"15px"},attrs:{type:"primary",plain:""},on:{click:t.toLogin}},[t._v("登录")]),t._v(" "),i("el-button",{staticStyle:{"font-size":"15px"},attrs:{plain:""},on:{click:t.toRegiste}},[t._v("注册")])]],2)]),t._v(" "),i("el-main",{staticStyle:{padding:"0"}},[i("router-view",{on:{state:t.state}})],1)],1)],1)},staticRenderFns:[]};var b=i("VU/8")(_,y,!1,function(t){i("tJWa")},"data-v-0e104278",null).exports,x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("el-carousel",{attrs:{height:"500px"}},t._l(t.topImg,function(e,s){return i("el-carousel-item",{key:s},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.url}}),t._v(" "),i("div",{staticClass:"cover"},[t._v("\n          "+t._s(e.title)),i("br"),t._v(" "),i("span",{staticStyle:{"font-size":"35px"}},[t._v(t._s(e.subTitle))])])])}),1),t._v(" "),i("img",{staticClass:"demoImg",attrs:{src:"/static/images/demo1.png"}}),i("br"),t._v(" "),i("img",{staticClass:"demoImg",attrs:{src:"/static/images/demo2.png"}}),i("br"),t._v(" "),i("img",{staticClass:"demoImg",attrs:{src:"/static/images/demo3.png"}}),i("br"),i("br"),t._v(" "),i("el-footer",{staticClass:"bottom"},[i("p",[t._v("Copyright © 2019 WjCat. All rights reserved.")]),t._v(" "),i("p",[t._v("问卷喵交流群：850804401")]),t._v(" "),i("p",[t._v("豫ICP备17008007号-2")])])],1)},staticRenderFns:[]};var k=i("VU/8")({data:function(){return{topImg:[{title:"简洁的界面设计",subTitle:"Concise interface design",url:"/static/images/4.jpg"},{title:"简单的打开方式",subTitle:"Simple Opening Method",url:"/static/images/6.jpg"},{title:"多样的数据可视化",subTitle:"Diversified data visualization",url:"/static/images/11.jpg"}]}}},x,!1,function(t){i("jb2R")},"data-v-6e0b75a4",null).exports,S=i("mvHQ"),C=i.n(S),F={data:function(){return{loading:!1,dialogShow:!1,dialogTitle:"",detail:[],wjId:0,title:"",desc:"",willAddQuestion:{id:0,type:"",title:"",options:[{title:"",id:0}],row:1,must:!1},allType:[{value:"radio",label:"单选题"},{value:"checkbox",label:"多选题"},{value:"text",label:"填空题"}]}},methods:{init:function(t,e,i){this.wjId=t,this.title=e,this.desc=i,this.getQuestionList()},getQuestionList:function(){var t=this;this.detail=[],this.loading=!0,c({opera_type:"get_question_list",username:"test",wjId:this.wjId}).then(function(e){console.log(e),t.detail=e.detail,t.loading=!1})},addQuestion:function(){0!=this.wjId&&null!=this.wjId?(this.dialogTitle="添加题目",this.willAddQuestion={id:0,type:"",title:"",options:[{title:"",id:0}],row:1,must:!1},this.dialogShow=!0):this.$message({type:"error",message:"清先创建问卷!"})},deleteQuestion:function(t){var e=this;this.$confirm("确定删除此题目?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){c({opera_type:"delete_question",username:"test",questionId:e.detail[t].id}).then(function(i){console.log(i),0==i.code?(e.detail.splice(t,1),e.$message({type:"success",message:"删除成功!"})):e.$message({type:"error",message:i.msg})})})},checkAddQuestion:function(){var t=this,e={};(e={type:this.willAddQuestion.type,title:this.willAddQuestion.title,options:this.willAddQuestion.options,row:this.willAddQuestion.row,must:this.willAddQuestion.must}).radioValue=-1,e.checkboxValue=[],e.textValue="",c({opera_type:"add_question",username:"test",wjId:this.wjId,questionId:this.willAddQuestion.id,title:this.willAddQuestion.title,type:this.willAddQuestion.type,options:this.willAddQuestion.options,row:this.willAddQuestion.row,must:this.willAddQuestion.must}).then(function(i){console.log(i),e.id=i.id,0==i.code?(t.dialogShow=!1,t.$message({type:"success",message:"保存成功!"}),t.getQuestionList()):(t.dialogShow=!1,t.$message({type:"error",message:i.msg})),t.willAddQuestion={id:0,type:"",title:"",options:[""],row:1,must:!1}})},editorQuestion:function(t){this.willAddQuestion.title=t.title,this.willAddQuestion.type=t.type,this.willAddQuestion.options=JSON.parse(C()(t.options)),this.willAddQuestion.text=t.text,this.willAddQuestion.row=t.row,this.willAddQuestion.must=t.must,this.willAddQuestion.id=t.id,this.dialogTitle="编辑问题",this.dialogShow=!0},addOption:function(){this.willAddQuestion.options.push({title:"",id:0})},deleteOption:function(t){this.willAddQuestion.options.splice(t,1)},typeChange:function(t){console.log(t),this.willAddQuestion.type=t,this.willAddQuestion.text="",this.row=1}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"Design",attrs:{"element-loading-text":"加载中..."}},[i("h3",[t._v(t._s(t.title))]),t._v(" "),""!=t.desc?i("div",{staticClass:"top"},[t._v("\n        "+t._s(t.desc)+"\n      ")]):t._e(),t._v(" "),t._l(t.detail,function(e,s){return i("el-card",{staticClass:"box-card",staticStyle:{margin:"10px"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"questionTitle"},[i("span",{staticStyle:{color:"#F56C6C"}},[e.must?i("span",[t._v("*")]):i("span",[t._v(" ")])]),t._v(" "),i("span",{staticStyle:{color:"black","margin-right":"3px"}},[t._v(t._s(s+1+"."))]),t._v("\n            "+t._s(e.title)+"\n          ")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("el-button",{staticStyle:{padding:"2px"},attrs:{type:"text"},on:{click:function(i){return t.editorQuestion(e)}}},[t._v("编辑")]),t._v(" "),i("el-button",{staticStyle:{padding:"2px",color:"#F56C6C"},attrs:{type:"text"},on:{click:function(e){return t.deleteQuestion(s)}}},[t._v("删除")])],1)]),t._v(" "),t._l(e.options,function(s,n){return"radio"==e.type?i("div",{staticClass:"text item"},[i("el-radio",{staticStyle:{margin:"5px"},attrs:{label:n},model:{value:e.radioValue,callback:function(i){t.$set(e,"radioValue",i)},expression:"item.radioValue"}},[t._v(t._s(s.title))])],1):t._e()}),t._v(" "),"checkbox"==e.type?i("el-checkbox-group",{model:{value:e.checkboxValue,callback:function(i){t.$set(e,"checkboxValue",i)},expression:"item.checkboxValue"}},t._l(e.options,function(e,s){return i("div",{staticClass:"text item"},[i("el-checkbox",{staticStyle:{margin:"5px"},attrs:{label:s}},[t._v(t._s(e.title))])],1)}),0):t._e(),t._v(" "),"text"==e.type?i("el-input",{attrs:{type:"textarea",rows:e.row,resize:"none"},model:{value:e.textValue,callback:function(i){t.$set(e,"textValue",i)},expression:"item.textValue"}}):t._e()],2)}),t._v(" "),i("el-button",{staticStyle:{"margin-top":"10px"},attrs:{icon:"el-icon-circle-plus"},on:{click:t.addQuestion}},[t._v("添加题目")]),t._v(" "),i("br"),i("br"),i("br"),i("br"),i("br"),t._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:t.dialogTitle,visible:t.dialogShow,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogShow=e}}},[i("el-form",{ref:"form",attrs:{model:t.willAddQuestion,"label-width":"80px"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"题目类型"}},[i("el-select",{attrs:{placeholder:"请选择题目类型"},on:{change:t.typeChange},model:{value:t.willAddQuestion.type,callback:function(e){t.$set(t.willAddQuestion,"type",e)},expression:"willAddQuestion.type"}},t._l(t.allType,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"是否必填"}},[i("el-checkbox",{model:{value:t.willAddQuestion.must,callback:function(e){t.$set(t.willAddQuestion,"must",e)},expression:"willAddQuestion.must"}},[t._v("必填")])],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"题目标题"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.willAddQuestion.title,callback:function(e){t.$set(t.willAddQuestion,"title",e)},expression:"willAddQuestion.title"}})],1),t._v(" "),"radio"==t.willAddQuestion.type||"checkbox"==t.willAddQuestion.type?[t._l(t.willAddQuestion.options,function(e,s){return i("el-form-item",{attrs:{label:"选项"+(s+1)}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入选项名"},model:{value:e.title,callback:function(i){t.$set(e,"title",i)},expression:"item.title"}})],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){return t.deleteOption(s)}}},[t._v("删除选项")])],1)],1)],1)}),t._v(" "),i("el-button",{staticClass:"addOptionButton",attrs:{type:"primary",plain:""},on:{click:t.addOption}},[t._v("新增选项")])]:t._e(),t._v(" "),"text"==t.willAddQuestion.type?[i("el-form-item",{attrs:{label:"填空"}},[i("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:t.willAddQuestion.row,resize:"none"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"行数"}},[i("el-input-number",{attrs:{min:1,max:10,label:"描述文字"},model:{value:t.willAddQuestion.row,callback:function(e){t.$set(t.willAddQuestion,"row",e)},expression:"willAddQuestion.row"}})],1)]:t._e()],2),t._v(" "),i("br"),t._v(" "),i("div",{staticStyle:{width:"100%","text-align":"right"}},[i("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.dialogShow=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.checkAddQuestion}},[t._v("完成")])],1)],1)],2)},staticRenderFns:[]};var A=i("VU/8")(F,$,!1,function(t){i("9ctF")},"data-v-2270f808",null).exports,j=i("Pg0u"),I=i.n(j),Q={data:function(){return{dialogTableVisible:!1,visible:[],loading:!1,detail:[]}},mounted:function(){},methods:{changeValue:function(t,e){this.$set(this.visible,t,e),console.log("num="+t),console.log("value="+e),1==e?this.setImg(t):2==e?this.setPar(t):3==e?this.setRing(t):4==e&&this.setTz(t)},dataAnalysis:function(t){var e=this;this.loading=!0,this.detail=[],console.log("wjid==="),console.log(this.wjId),c({opera_type:"dataAnalysis",username:"test",wjId:t}).then(function(t){console.log(t),console.log(t.detail),e.detail=t.detail,e.loading=!1}),this.dialogShow=!1},test:function(){console.log(this.visible)},setImg:function(t){console.log(t),console.log(this.detail[t].result);var e=I.a.init(document.getElementById("img"+t)),i={tooltip:{},legend:{data:["数量"]},dataset:{dimensions:["option","count","percent"],source:this.detail[t].result},xAxis:{type:"category"},yAxis:{},series:[{name:"数量：",type:"bar",barWidth:30,color:"deepskyblue"}]};e.setOption(i)},setPar:function(t){var e=I.a.init(document.getElementById("bing"+t)),i={tooltip:{},color:["#409EFF","#FFB54D","#FF7466","#44DB5E"],legend:{data:["数量"]},dataset:{dimensions:["option","count","percent"],source:this.detail[t].result},series:[{name:"统计结果：",type:"pie",radius:"55%",center:["50%","50%"],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.setOption(i)},setRing:function(t){var e=I.a.init(document.getElementById("ring"+t)),i={tooltip:{},legend:{},color:["#409EFF","#FFB54D","#FF7466","#44DB5E"],dataset:{dimensions:["option","count","percent"],source:this.detail[t].result},series:[{name:"数量：",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}}}]};e.setOption(i)},setTz:function(t){var e=I.a.init(document.getElementById("tz"+t)),i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataset:{dimensions:["option","count","percent"],source:this.detail[t].result},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category"},series:[{name:"数量：",type:"bar",barWidth:30,color:"#409EFF"}]};e.setOption(i)},setText:function(t){return{resule:this.detail[t].result}}}},V={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"Count",attrs:{"element-loading-text":"生成中..."}},[0==t.detail.length?i("div",[t._v("暂时没有数据")]):t._e(),t._v(" "),t._l(t.detail,function(e,s){return i("el-card",{staticClass:"question"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(s+1+"."+e.title))])]),t._v(" "),"radio"==e.type||"checkbox"==e.type?i("div",[i("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.result,stripe:""}},[i("el-table-column",{attrs:{prop:"option",label:"选项",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"count",label:"数量",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"percent",label:"占比"}})],1),t._v(" "),i("br"),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(s,1)}}},[t._v("柱状图")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(s,2)}}},[t._v("饼状图")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(s,3)}}},[t._v("圆环图")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(s,4)}}},[t._v("条形图")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(s,0)}}},[t._v("隐藏图表")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.visible[s],expression:"visible[index]==1"}],staticClass:"img",attrs:{id:"img"+s}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.visible[s],expression:"visible[index]==2"}],staticClass:"bing",attrs:{id:"bing"+s}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.visible[s],expression:"visible[index]==3"}],staticClass:"ring",attrs:{id:"ring"+s}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4==t.visible[s],expression:"visible[index]==4"}],staticClass:"tz",attrs:{id:"tz"+s}})],1):t._e(),t._v(" "),"text"==e.type?i("div",[i("el-dialog",{attrs:{title:"详细内容",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[i("el-table",{attrs:{data:e.result}},[i("el-table-column",{attrs:{property:"context",label:"答案"}})],1)],1),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},nativeOn:{click:function(e){t.dialogTableVisible=!0}}},[t._v("详细内容")])],1):t._e()])})],2)},staticRenderFns:[]};var T=i("VU/8")(Q,V,!1,function(t){i("VNCK")},"data-v-7893387a",null).exports,W={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(t){this.$emit("click",t)}}},E={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.buttonSize?"el-button--"+t.buttonSize:"",{"is-disabled":t.buttonDisabled,"is-loading":t.loading,"is-plain":t.plain,"is-round":t.round,"is-circle":t.circle}],attrs:{disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?i("i",{staticClass:"el-icon-loading"}):t._e(),t._v(" "),t.icon&&!t.loading?i("i",{class:t.icon}):t._e(),t._v(" "),t.$slots.default?i("span",[t._t("default")],2):t._e()])},staticRenderFns:[]},B=i("VU/8")(W,E,!1,null,null,null).exports,z=i("71e1"),O=i.n(z),L={components:{ElButton:B,Design:A,QRCode:O.a,DataShow:T},data:function(){return{defaultActive:1,activeName:"wjsj",wjList:[],loading:!1,dialogShow:!1,shareDialogShow:!1,willAddWj:{id:0,title:"",flag:0,desc:"感谢您能抽时间参与本次问卷，您的意见和建议就是我们前行的动力！"},shareInfo:{url:""}}},mounted:function(){this.logincheck()},computed:{nowSelect:function(){console.log("nowSelect update");var t=this.wjList[this.defaultActive-1];return 0==this.wjList.length?{id:null,title:null,desc:null,status:null}:{id:t.id,title:t.title,desc:t.desc,status:t.status}}},methods:{logincheck:function(){var t=this;c({opera_type:"logincheck"}).then(function(e){console.log(e),404==e.code?(t.$message({type:"error",message:"您还未登录，请登录",showClose:!0}),t.$router.push({path:"/login"})):t.getWjList()})},pushWj:function(){var t=this,e=1;1==this.nowSelect.status&&(e=0),c({opera_type:"push_wj",username:"test",wjId:this.nowSelect.id,status:e}).then(function(i){console.log(i),0==i.code?(t.$message({type:"success",message:1==e?"问卷发布成功！":"问卷暂停成功！"}),t.getWjList()):t.$message({type:"error",message:i.msg})})},shareWj:function(){0!=this.nowSelect.status?(this.shareInfo.url=window.location.origin+"/display/"+this.nowSelect.id,this.shareDialogShow=!0):this.$message({type:"error",message:"请先发布问卷能分享！"})},makeQrcode:function(){var t=document.getElementById("canvas");O.a.toCanvas(t,this.shareInfo.url)},copySuccess:function(t){console.log(t),this.$message({type:"success",message:"已复制链接到剪切板"})},copyError:function(t){console.log(t),this.$message({type:"error",message:"复制失败"})},openShareUrl:function(){window.open(this.shareInfo.url)},previewWj:function(){var t=window.location.origin+"/display/"+this.nowSelect.id;console.log(t),window.open(t)},editWj:function(){this.dialogShow=!0,this.willAddWj=this.nowSelect},addWjButtonClick:function(){this.dialogShow=!0,this.willAddWj={id:0,title:"",flag:0,desc:"感谢您能抽时间参与本次问卷，您的意见和建议就是我们前行的动力！"}},addWj:function(){var t=this;""!=this.willAddWj.title?(c({opera_type:"add_wj",username:"test",title:this.willAddWj.title,id:this.willAddWj.id,desc:this.willAddWj.desc}).then(function(e){console.log(e),0==e.code?(t.$message({type:"success",message:"保存成功!"}),t.getWjList()):t.$message({type:"error",message:e.msg})}),this.dialogShow=!1,this.willAddWj.title=""):this.$message({type:"error",message:"标题不能为空"})},getWjList:function(){var t=this;this.loading=!0,c({opera_type:"get_wj_list",username:"test"}).then(function(e){console.log(e),t.wjList=e.data.detail,t.loading=!1,t.lookDetail()})},deleteWj:function(){var t=this;this.$confirm("确定删除"+this.nowSelect.title+"? 删除后不可恢复！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,c({opera_type:"delete_wj",username:"test",id:t.nowSelect.id}).then(function(e){console.log(e),0==e.code?(t.$message({type:"success",message:"删除成功!"}),t.loading=!1,t.getWjList(),t.defaultActive=1):t.$message({type:"error",message:e.msg})})})},wjClick:function(t,e){this.defaultActive=(e+1).toString(),this.lookDetail()},lookDetail:function(){this.$refs.design.init(this.nowSelect.id,this.nowSelect.title,this.nowSelect.desc),console.log("id="),console.log(this.nowSelect.id),this.$refs.dataShow.dataAnalysis(this.nowSelect.id)}}},N={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("el-row",[i("el-col",{attrs:{span:6}},[i("div",{staticClass:"opera"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"创建问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-plus",type:"text"},on:{click:t.addWjButtonClick}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-edit",type:"text",disabled:0==t.nowSelect.id||null==t.nowSelect.id},on:{click:t.editWj}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:0==t.nowSelect.status?"发布问卷":"暂停问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:0==t.nowSelect.status?"el-icon-video-play":"el-icon-video-pause",type:"text",disabled:0==t.nowSelect.id||null==t.nowSelect.id},on:{click:t.pushWj}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"预览问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-view",type:"text",disabled:0==t.nowSelect.id||null==t.nowSelect.id},on:{click:t.previewWj}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-delete",type:"text",disabled:0==t.nowSelect.id||null==t.nowSelect.id},on:{click:t.deleteWj}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分享问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-share",type:"text",disabled:0==t.nowSelect.id||null==t.nowSelect.id},on:{click:t.shareWj}})],1)],1),t._v(" "),i("el-menu",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"menu",attrs:{"default-active":t.defaultActive.toString()}},[0==t.nowSelect.id||null==t.nowSelect.id?i("div",{staticStyle:{width:"100%","text-align":"center","font-size":"15px","line-height":"20px","margin-top":"20px",color:"#303133"}},[t._v("\n          点击上方 + 创建第一个问卷\n        ")]):t._e(),t._v(" "),t._l(t.wjList,function(e,s){return i("el-menu-item",{attrs:{index:(s+1).toString()},on:{click:function(i){return t.wjClick(e.id,s)}}},[i("i",{staticClass:"el-icon-tickets"}),t._v(" "),i("span",{staticStyle:{display:"inline-block"},attrs:{slot:"title"},slot:"title"},[t._v("\n            "+t._s(e.title)+"\n            "),0==e.status?i("span",{staticStyle:{color:"#F56C6C","font-size":"13px"}},[i("i",{staticClass:"el-icon-link",staticStyle:{margin:"0","font-size":"13px",color:"#F56C6C",width:"10px"}}),t._v("\n              未发布\n            ")]):t._e(),t._v(" "),1==e.status?i("span",{staticStyle:{color:"#67C23A","font-size":"13px"}},[i("i",{staticClass:"el-icon-link",staticStyle:{margin:"0","font-size":"13px",color:"#67C23A",width:"10px"}}),t._v("\n              已发布\n            ")]):t._e()])])})],2)],1),t._v(" "),i("el-col",{attrs:{span:18}},[i("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"问卷设计",name:"wjsj"}},[i("div",{staticClass:"content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.nowSelect.id||null==t.nowSelect.id,expression:"nowSelect.id==0||nowSelect.id==null"}]},[t._v("请先选择问卷")]),t._v(" "),i("design",{directives:[{name:"show",rawName:"v-show",value:0!=t.nowSelect.id&&null!=t.nowSelect.id,expression:"nowSelect.id!=0&&nowSelect.id!=null"}],ref:"design"})],1)]),t._v(" "),i("el-tab-pane",{attrs:{label:"回答统计",name:"hdtj"}},[i("div",{ref:"pdf",staticClass:"content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.nowSelect.id||null==t.nowSelect.id,expression:"nowSelect.id==0||nowSelect.id==null"}]},[t._v("请先选择问卷")]),t._v(" "),i("data-show",{directives:[{name:"show",rawName:"v-show",value:0!=t.nowSelect.id&&null!=t.nowSelect.id,expression:"nowSelect.id!=0&&nowSelect.id!=null"}],ref:"dataShow"})],1)])],1)],1)],1),t._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"添加问卷",visible:t.dialogShow,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogShow=e}}},[i("el-form",{ref:"form",attrs:{model:t.willAddWj,"label-width":"80px"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷标题",required:""}},[i("el-input",{attrs:{placeholder:"请输入问卷标题"},model:{value:t.willAddWj.title,callback:function(e){t.$set(t.willAddWj,"title",e)},expression:"willAddWj.title"}})],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷描述"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入问卷描述",rows:"5"},model:{value:t.willAddWj.desc,callback:function(e){t.$set(t.willAddWj,"desc",e)},expression:"willAddWj.desc"}})],1)],1),t._v(" "),i("div",{staticStyle:{width:"100%","text-align":"right"}},[i("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.dialogShow=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.addWj}},[t._v("确定")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"分享问卷",visible:t.shareDialogShow,"close-on-click-modal":!0},on:{"update:visible":function(e){t.shareDialogShow=e},opened:t.makeQrcode}},[i("el-form",{ref:"form",attrs:{model:t.shareInfo,"label-width":"80px"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷链接"}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-input",{attrs:{readonly:""},model:{value:t.shareInfo.url,callback:function(e){t.$set(t.shareInfo,"url",e)},expression:"shareInfo.url"}})],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.shareInfo.url,expression:"shareInfo.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.copyError,expression:"copyError",arg:"error"}],staticStyle:{"margin-left":"5px"}},[t._v("复制")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.openShareUrl}},[t._v("打开")])],1)],1)],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"二维码"}},[i("canvas",{staticStyle:{width:"150px",height:"150px"},attrs:{id:"canvas"}})])],1)],1)],1)},staticRenderFns:[]};var R=i("VU/8")(L,N,!1,function(t){i("Sb/a")},"data-v-e85f0854",null).exports,D={data:function(){return{dialogShow:!1,dialogTitle:"",dialogType:1,oldItem:null,willAddQuestion:{type:"",title:"",options:[""],text:"",row:1},allType:[{value:"radio",label:"单选题"},{value:"checkbox",label:"多选题"},{value:"text",label:"填空题"}],title:"",desc:"",detail:[],startTimestamp:0,submitLoading:!1,submitText:"提交"}},mounted:function(){var t=this,e=this.$route.params.id;d({opera_type:"get_info",wjId:e,username:"test"}).then(function(e){console.log(e),0==e.code?(t.title=e.title,t.desc=e.desc,t.detail=e.detail,document.title=e.title):t.$message({type:"error",message:e.msg})}),this.startTimestamp=(new Date).getTime()},methods:{submit:function(){var t=this;this.submitLoading=!0,this.submitText="提交中";var e=this.$route.params.id,i=parseInt(((new Date).getTime()-this.startTimestamp)/1e3);d({opera_type:"submit_wj",wjId:e,useTime:i,detail:this.detail}).then(function(e){console.log(e),0==e.code?(t.submitLoading=!1,t.submitText="提交",t.$router.push({path:"/thankyou"})):(t.submitLoading=!1,t.submitText="提交",t.$notify.error({title:"错误",message:e.msg}))})}}},q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"display"},[i("div",{staticClass:"content"},[i("h3",[t._v(t._s(t.title))]),t._v(" "),""!=t.desc?i("div",{staticClass:"top"},[t._v("\n      "+t._s(t.desc)+"\n    ")]):t._e(),t._v(" "),t._l(t.detail,function(e,s){return i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"questionTitle"},[i("span",{staticStyle:{color:"#F56C6C"}},[e.must?i("span",[t._v("*")]):i("span",[t._v(" ")])]),t._v("\n          "+t._s(s+1+"."+e.title)+"\n        ")])]),t._v(" "),t._l(e.options,function(s){return"radio"==e.type?i("div",{staticClass:"text item"},[i("el-radio",{staticStyle:{margin:"5px"},attrs:{label:s.id},model:{value:e.radioValue,callback:function(i){t.$set(e,"radioValue",i)},expression:"item.radioValue"}},[t._v(t._s(s.title))])],1):t._e()}),t._v(" "),"checkbox"==e.type?i("el-checkbox-group",{model:{value:e.checkboxValue,callback:function(i){t.$set(e,"checkboxValue",i)},expression:"item.checkboxValue"}},t._l(e.options,function(e){return i("div",{staticClass:"text item"},[i("el-checkbox",{staticStyle:{margin:"5px"},attrs:{label:e.id}},[t._v(t._s(e.title))])],1)}),0):t._e(),t._v(" "),"text"==e.type?i("el-input",{attrs:{type:"textarea",rows:e.row,resize:"none"},model:{value:e.textValue,callback:function(i){t.$set(e,"textValue",i)},expression:"item.textValue"}}):t._e()],2)}),t._v(" "),i("el-button",{staticStyle:{margin:"5px"},attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v(t._s(t.submitText))]),t._v(" "),i("div",{staticClass:"bottom"},[i("el-link",{attrs:{type:"info",href:"/index"}},[t._v("问卷喵 提供技术支持")])],1)],2)])},staticRenderFns:[]};var P=i("VU/8")(D,q,!1,function(t){i("ieFN")},"data-v-2b8f01aa",null).exports,U={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"thankYou"},[e("el-card",{staticStyle:{"font-size":"18px","line-height":"40px",padding:"10px"},attrs:{shadow:"never"}},[e("i",{staticClass:"el-icon-circle-check",staticStyle:{color:"green","font-size":"50px"}}),e("br"),this._v("\n    您的回答已提交，感谢您的参与！"),e("br"),e("br"),this._v(" "),e("el-divider"),this._v(" "),e("el-link",{attrs:{type:"info",href:"/index"}},[this._v("问卷喵 提供技术支持")])],1)],1)},staticRenderFns:[]};var M=i("VU/8")(null,U,!1,function(t){i("CukG"),i("7VM3")},"data-v-f7174236",null).exports;s.default.use(l.a);var H=new l.a({mode:"history",routes:[{path:"/",name:"Base",component:b,children:[{path:"/",name:"Index",component:k},{path:"/index",name:"Index",component:k},{path:"/login",name:"Login",component:h},{path:"/register",name:"Register",component:w},{path:"/home",name:"Home",component:R}]},{path:"/display/:id",name:"Display",component:P},{path:"/thankyou",name:"ThankYou",component:M}]}),G=(i("tvR6"),i("wvfG")),J=i.n(G),K=i("NC6I"),Y=i.n(K),X={install:function(t){Object.defineProperty(t.prototype,"$md5",{value:Y.a})}};s.default.use(J.a),s.default.use(p.a),s.default.use(X),s.default.config.productionTip=!1,new s.default({el:"#app",router:H,components:{App:o},template:"<App/>"})},Pg0u:function(t,e){t.exports=echarts},"Sb/a":function(t,e){},VNCK:function(t,e){},ar3o:function(t,e){},"eSc+":function(t,e){},ieFN:function(t,e){},jb2R:function(t,e){},tJWa:function(t,e){},tvR6:function(t,e){}},["NHnr"]);